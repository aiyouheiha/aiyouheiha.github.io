<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Singo &amp; Asher</title>
  
  <subtitle>世间万物皆有定数</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://ashman.top/"/>
  <updated>2018-05-23T09:37:40.314Z</updated>
  <id>http://ashman.top/</id>
  
  <author>
    <name>Asher</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>一次对 Spring Security UserDetailsService 的借鉴</title>
    <link href="http://ashman.top/2018/05/23/more/%E4%B8%80%E6%AC%A1%E5%AF%B9%20Spring%20Security%20UserDetailsService%20%E7%9A%84%E5%80%9F%E9%89%B4/"/>
    <id>http://ashman.top/2018/05/23/more/一次对 Spring Security UserDetailsService 的借鉴/</id>
    <published>2018-05-23T09:18:26.000Z</published>
    <updated>2018-05-23T09:37:40.314Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>org.springframework.security.core.userdetails.UserDetailsService</p></blockquote><h2 id="UserDetailsService"><a href="#UserDetailsService" class="headerlink" title="UserDetailsService"></a>UserDetailsService</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface UserDetailsService &#123;</span><br><span class="line">  UserDetails loadUserByUsername(String username) throws UsernameNotFoundException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="场景描述"><a href="#场景描述" class="headerlink" title="场景描述"></a>场景描述</h2><ul><li>应用中有一个单独的功能模块</li><li>需要尽可能地减少与应用中其他模块的交互</li><li>但是该模块又必须使用到其他模块持有的一条数据</li></ul><h3 id="不经大脑的实现方式"><a href="#不经大脑的实现方式" class="headerlink" title="不经大脑的实现方式"></a>不经大脑的实现方式</h3><p>将获取该数据的实例，以构造参数等形式直接在模块中使用，如</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class ThisModel &#123;</span><br><span class="line">    private OtherModel otherModel;</span><br><span class="line"></span><br><span class="line">    public ThisModel(OtherModel otherModel) &#123;</span><br><span class="line">        this.otherModel = otherModel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void use() &#123;</span><br><span class="line">        System.out.println(otherModel.data());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>结果</strong> 造成了不必要的耦合，这个模块如果想要单独提取出来，进行复用，ThisModel 这个类就成了累赘</li></ul><h3 id="参考-UserDetailsService-的实现方式"><a href="#参考-UserDetailsService-的实现方式" class="headerlink" title="参考 UserDetailsService 的实现方式"></a>参考 UserDetailsService 的实现方式</h3><ul><li>在模块中定义一个获取这条数据的接口，类似 UserDetailsService</li><li>在外部实现这个接口，并配置为 Spring Bean</li><li>在需要使用该数据的类中，将这个接口作为构造参数</li><li>以 @Autowire 等方式，通过 Spring 注入接口实现的 Bean</li><li>这样，需要复用这个模块时，新的应用只需要实现这个接口就可以了，当前模块不需要进行改动</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class OtherModel implements ThisModelInterface &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public String data() &#123;</span><br><span class="line">        return &quot;Data&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;org.springframework.security.core.userdetails.UserDetailsService&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;UserDetailsService&quot;&gt;&lt;a href=&quot;#Use
      
    
    </summary>
    
      <category term="更多" scheme="http://ashman.top/categories/%E6%9B%B4%E5%A4%9A/"/>
    
    
      <category term="Spring Security" scheme="http://ashman.top/tags/Spring-Security/"/>
    
  </entry>
  
  <entry>
    <title>favorites</title>
    <link href="http://ashman.top/2018/05/22/more/favorites/"/>
    <id>http://ashman.top/2018/05/22/more/favorites/</id>
    <published>2018-05-22T10:10:32.000Z</published>
    <updated>2018-05-22T10:31:54.842Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Arrays.asList(&quot;On&quot;, &quot;Off&quot;)</span><br><span class="line">Collections.singletonList(&quot;Set&quot;)</span><br></pre></td></tr></table></figure><h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@JsonInclude(JsonInclude.Include.NON_NULL)</span><br><span class="line">@JsonIgnoreProperties(ignoreUnknown = true)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * JSON 字段名为 interface 是 Java 修饰符，无法直接用于命名 Java 类的属性 &lt;br&gt;</span><br><span class="line"> * 此时，通过 &#123;@link JsonProperty&#125; 可以进行转换</span><br><span class="line"> */</span><br><span class="line">@JsonProperty(&quot;interface&quot;)</span><br><span class="line">public String interfaceName;</span><br></pre></td></tr></table></figure><h3 id="lombok"><a href="#lombok" class="headerlink" title="lombok"></a>lombok</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">@Builder</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@EqualsAndHashCode(callSuper = true)</span><br><span class="line">@ToString(callSuper = true)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Java&quot;&gt;&lt;a href=&quot;#Java&quot; class=&quot;headerlink&quot; title=&quot;Java&quot;&gt;&lt;/a&gt;Java&lt;/h2&gt;&lt;h3 id=&quot;List&quot;&gt;&lt;a href=&quot;#List&quot; class=&quot;headerlink
      
    
    </summary>
    
      <category term="更多" scheme="http://ashman.top/categories/%E6%9B%B4%E5%A4%9A/"/>
    
    
      <category term="favorites" scheme="http://ashman.top/tags/favorites/"/>
    
  </entry>
  
  <entry>
    <title>设计模式 - 观察者模式</title>
    <link href="http://ashman.top/2018/05/14/design-pattern/behavioral-design-pattern/observer-pattern/"/>
    <id>http://ashman.top/2018/05/14/design-pattern/behavioral-design-pattern/observer-pattern/</id>
    <published>2018-05-14T07:04:27.000Z</published>
    <updated>2018-05-14T07:56:32.110Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2018/05/14/design-pattern/behavioral-design-pattern/observer-pattern/observer-pattern-uml.png" alt="Observer Pattern UML"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;/2018/05/14/design-pattern/behavioral-design-pattern/observer-pattern/observer-pattern-uml.png&quot; alt=&quot;Observer Pattern UML&quot;&gt;&lt;/p&gt;
      
    
    </summary>
    
      <category term="设计模式" scheme="http://ashman.top/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="Java" scheme="http://ashman.top/tags/Java/"/>
    
      <category term="设计模式" scheme="http://ashman.top/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>nginx 初识</title>
    <link href="http://ashman.top/2018/05/04/nginx/nginx-start/"/>
    <id>http://ashman.top/2018/05/04/nginx/nginx-start/</id>
    <published>2018-05-04T02:14:59.000Z</published>
    <updated>2018-05-04T05:58:41.492Z</updated>
    
    <content type="html"><![CDATA[<p>说明：</p><ol><li>作为入门，初始操作均在 root 用户下进行，也即未考虑安全问题。</li></ol><hr><h2 id="nginx-安装与使用"><a href="#nginx-安装与使用" class="headerlink" title="nginx 安装与使用"></a>nginx 安装与使用</h2><h3 id="系统信息"><a href="#系统信息" class="headerlink" title="系统信息"></a>系统信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># uname -a</span><br><span class="line">Linux VM_0_4_centos 3.10.0-514.26.2.el7.x86_64 #1 SMP Tue Jul 4 15:04:05 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># yum install nginx</span><br><span class="line"># nginx -v</span><br><span class="line">nginx version: nginx/1.12.2</span><br><span class="line"># nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br></pre></td></tr></table></figure><h3 id="基本控制命令"><a href="#基本控制命令" class="headerlink" title="基本控制命令"></a>基本控制命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">nginx              # 启动 nginx</span><br><span class="line"></span><br><span class="line">nginx -v           # show version and exit</span><br><span class="line">nginx -t           # test configuration and exit</span><br><span class="line"></span><br><span class="line">nginx -s signal    # send signal to a master process: stop, quit, reopen, reload</span><br><span class="line">nginx -s stop      # 停止 nginx</span><br><span class="line">nginx -s reopen    # 重启 nginx</span><br><span class="line">nginx -s reload    # 重新载入配置文件</span><br></pre></td></tr></table></figure><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br></pre></td></tr></table></figure><p>其中 <code>/etc/nginx/nginx.conf</code> 即为 nginx 的配置文件。</p><h3 id="以默认配置启动并访问"><a href="#以默认配置启动并访问" class="headerlink" title="以默认配置启动并访问"></a>以默认配置启动并访问</h3><ul><li>使用命令 <code>nginx</code> 启动 nginx</li><li>查看配置文件 <code>/etc/nginx/nginx.conf</code><ul><li>其中 <code>root /usr/share/nginx/html;</code> 该行指定了 nginx 默认的服务根目录。</li></ul></li></ul><p>通过 <code>curl localhost</code> 可以访问到默认工作目录 <code>/usr/share/nginx/html</code> 下 index.html 中的内容。</p><h3 id="自定义根目录"><a href="#自定义根目录" class="headerlink" title="自定义根目录"></a>自定义根目录</h3><p>找到文件中的 <code>root /usr/share/nginx/html;</code> 修改路径为自定义的路径，例如</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># root /usr/share/nginx/html;</span><br><span class="line">root /home/test/static;</span><br></pre></td></tr></table></figure><p>保存并关闭文件，执行 <code>nginx -s reload</code> 重新加载配置文件，并再次访问</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># curl localhost</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;403 Forbidden&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body bgcolor=&quot;white&quot;&gt;</span><br><span class="line">&lt;center&gt;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&lt;/center&gt;</span><br><span class="line">&lt;hr&gt;&lt;center&gt;nginx/1.12.2&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>返回 403 Forbidden 可能是因为以下原因：</p><ol><li>根目录下没有 index.html 文件（或者其他通过 index 配置项指定的入口文件，不配置默认为 index.html）</li><li>与 Linux 目录访问权限相关。</li></ol><p>即使通过 root 用户启动 nginx，其工作进程依然是配置文件中 <code>user nginx;</code> 所指定的用户。</p><p>通过 <code>ps aux | grep nginx</code> 查看 nginx 进程信息，可以看到 <code>nginx: worker process</code> 对应用户为 <code>nginx</code>。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ps aux | grep nginx</span><br><span class="line">root      5356  0.0  0.2 124236  5392 ?        Ss   10:26   0:00 nginx: master process nginx</span><br><span class="line">nginx     6145  0.0  0.2 126324  4444 ?        S    10:41   0:00 nginx: worker process</span><br></pre></td></tr></table></figure><p>而自定义路径 <code>/home/test/static</code> 中的 test 目录，是用户 test 的用户目录，其访问权限如下，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drwx------ 3 root  root  4096 5月   4 10:42 test</span><br></pre></td></tr></table></figure><p>其他用户（当前指 nginx 用户）是不具备该目录的访问权限的。</p><p><strong>方案一（推荐）</strong></p><p>http server 的文件一般会归属于一个特定的用户，修改 nginx 配置文件，<br>配置 nginx 工作进程的运行用户为相应用户即可，例如</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># user nginx;</span><br><span class="line">user test;</span><br></pre></td></tr></table></figure><p>保存之后 <code>nginx -s reload</code> 重新加载配置文件，即可顺利访问～</p><p><strong>方案二（不太推荐）</strong></p><p>为该目录配置其他用户的 <strong>执行权限（执行 index.html）</strong> 即可顺利访问。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># chmod +001 test/</span><br><span class="line"># ll</span><br><span class="line">drwx-----x 3 test  test  4096 5月   4 11:30 test</span><br></pre></td></tr></table></figure><p><strong>方案三（大雾）</strong></p><p>将工作进程的运行用户配置为 root （看着就相当不安全哈～）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;说明：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;作为入门，初始操作均在 root 用户下进行，也即未考虑安全问题。&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&quot;nginx-安装与使用&quot;&gt;&lt;a href=&quot;#nginx-安装与使用&quot; class=&quot;headerlink&quot; title=&quot;
      
    
    </summary>
    
      <category term="nginx" scheme="http://ashman.top/categories/nginx/"/>
    
    
      <category term="nginx" scheme="http://ashman.top/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>页面布局之导航菜单</title>
    <link href="http://ashman.top/2018/04/29/front-end/css/%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80%E4%B9%8B%E5%AF%BC%E8%88%AA%E8%8F%9C%E5%8D%95/"/>
    <id>http://ashman.top/2018/04/29/front-end/css/页面布局之导航菜单/</id>
    <published>2018-04-29T03:46:33.000Z</published>
    <updated>2018-04-29T04:42:41.523Z</updated>
    
    <content type="html"><![CDATA[<h2 id="选项卡"><a href="#选项卡" class="headerlink" title="选项卡"></a>选项卡</h2><p>以下样例中导航条为 .nav 元素，其子元素 ul 为所实现的 <strong>选项卡</strong></p><p>相关具体信息，见样例中的注释。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;页面布局之导航菜单（选项卡）&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  .nav &#123;</span><br><span class="line">    /* 不配置选项卡 ul 会填充满导航条 .nav */</span><br><span class="line">    display: flex;</span><br><span class="line">    border: 2px solid black;</span><br><span class="line">  &#125;</span><br><span class="line">  .nav ul &#123;</span><br><span class="line">    /* display: flex; 让 ul 子元素显示在同一行，且去掉部分默认样式 */</span><br><span class="line">    display: flex;</span><br><span class="line">    /* padding: 0; 去除 ul 左侧默认的 padding 原为显示 li 前面的点号 */</span><br><span class="line">    padding: 0;</span><br><span class="line">    /* margin: 0; 去除 ul 上下侧默认的 margin */</span><br><span class="line">    margin: 0;</span><br><span class="line">    /* 为了区别显示选项卡（ul）和导航条（.nav） */</span><br><span class="line">    background: grey;</span><br><span class="line">  &#125;</span><br><span class="line">  .nav ul li &#123;</span><br><span class="line">    /* 去除 li 前方黑点 */</span><br><span class="line">    list-style: none;</span><br><span class="line"></span><br><span class="line">    /* 其他配置 */</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    color: #000000;</span><br><span class="line">  &#125;</span><br><span class="line">  .nav ul li a &#123;</span><br><span class="line">    padding: 20px;</span><br><span class="line"></span><br><span class="line">    /* </span><br><span class="line">      display: block;</span><br><span class="line">      如不设置 padding 效果仅对左右侧生效。</span><br><span class="line">      这是因为 a 默认样式为 display: inline; </span><br><span class="line">      即上下侧没有间距。 </span><br><span class="line">    */</span><br><span class="line">    display: block;</span><br><span class="line"></span><br><span class="line">    /* </span><br><span class="line">      text-decoration: none;</span><br><span class="line">      去掉 a 配置了 href 属性时，文本默认的 link 下划线 </span><br><span class="line">    */</span><br><span class="line">    text-decoration: none;</span><br><span class="line"></span><br><span class="line">    /* </span><br><span class="line">      color: inherit; </span><br><span class="line">      让 a 继承父元素颜色设置。</span><br><span class="line">      否则，会使用系统默认颜色，一般是蓝色</span><br><span class="line">    */</span><br><span class="line">    color: inherit;</span><br><span class="line">  &#125;</span><br><span class="line">  /* .nav ul li a:hover 设置鼠标指针浮动其上时的样式 */</span><br><span class="line">  .nav ul li a:hover &#123;</span><br><span class="line">    background: black;</span><br><span class="line">    color: red;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;nav&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Hello Chaoyang&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Hello Beijing&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Hello China&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Hello World&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;选项卡&quot;&gt;&lt;a href=&quot;#选项卡&quot; class=&quot;headerlink&quot; title=&quot;选项卡&quot;&gt;&lt;/a&gt;选项卡&lt;/h2&gt;&lt;p&gt;以下样例中导航条为 .nav 元素，其子元素 ul 为所实现的 &lt;strong&gt;选项卡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;相关具体信息
      
    
    </summary>
    
      <category term="Front End" scheme="http://ashman.top/categories/Front-End/"/>
    
    
      <category term="Front End" scheme="http://ashman.top/tags/Front-End/"/>
    
      <category term="css" scheme="http://ashman.top/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>页面布局之堆叠</title>
    <link href="http://ashman.top/2018/04/28/front-end/css/%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80%E4%B9%8B%E5%A0%86%E5%8F%A0/"/>
    <id>http://ashman.top/2018/04/28/front-end/css/页面布局之堆叠/</id>
    <published>2018-04-28T14:22:22.000Z</published>
    <updated>2018-04-30T01:33:11.942Z</updated>
    
    <content type="html"><![CDATA[<h2 id="栗子"><a href="#栗子" class="headerlink" title="栗子"></a>栗子</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;页面布局之堆叠&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  body &#123;</span><br><span class="line">    font-size: 30px;</span><br><span class="line">  &#125;</span><br><span class="line">  .header &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">  &#125;</span><br><span class="line">  .banner &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    z-index: 0;</span><br><span class="line"></span><br><span class="line">    /* 以下配置项是为显示效果添加 */</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: flex-end;</span><br><span class="line">    align-items: flex-end;</span><br><span class="line">    background: red;</span><br><span class="line">    height: 200px;</span><br><span class="line">    opacity: 0.3;</span><br><span class="line">  &#125;</span><br><span class="line">  .nav &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    z-index: 1;</span><br><span class="line">    width: 100%;</span><br><span class="line">    top: 0;</span><br><span class="line"></span><br><span class="line">    /* 以下配置项是为显示效果添加 */</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: flex-end;</span><br><span class="line">    align-items: flex-end;</span><br><span class="line">    background: grey;</span><br><span class="line">    height: 100px;</span><br><span class="line">    opacity: 0.6;</span><br><span class="line">  &#125;</span><br><span class="line">  .content &#123;</span><br><span class="line">    /* 以下配置项是为显示效果添加 */</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: flex-end;</span><br><span class="line">    align-items: flex-end;</span><br><span class="line">    background: green;</span><br><span class="line">    height: 500px;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;header&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;banner&quot;&gt;This is banner&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;nav&quot;&gt;This is nav&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;content&quot;&gt;This is content&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="z-index"><a href="#z-index" class="headerlink" title="z-index"></a>z-index</h2><blockquote><p>设置元素的堆叠顺序。</p></blockquote><p>想象一个垂直于屏幕的 z 轴，其数值越大，对应元素距离用户越近。</p><h2 id="position"><a href="#position" class="headerlink" title="position"></a>position</h2><blockquote><p>规定元素的定位类型。</p></blockquote><h3 id="static"><a href="#static" class="headerlink" title="static"></a>static</h3><blockquote><p>默认值。</p></blockquote><p>没有定位，元素出现在正常的流中（忽略 top, bottom, left, right 或者 z-index 声明）。</p><h3 id="absolute"><a href="#absolute" class="headerlink" title="absolute"></a>absolute</h3><blockquote><p>生成绝对定位的元素，相对于 <strong>static 定位以外的第一个父元素</strong> 进行定位。</p></blockquote><p>元素的位置通过 “left”, “top”, “right” 以及 “bottom” 属性进行规定。</p><h3 id="fixed"><a href="#fixed" class="headerlink" title="fixed"></a>fixed</h3><blockquote><p>生成绝对定位的元素，相对于 <strong>浏览器窗口</strong> 进行定位。</p></blockquote><p>元素的位置通过 “left”, “top”, “right” 以及 “bottom” 属性进行规定。</p><h3 id="relative"><a href="#relative" class="headerlink" title="relative"></a>relative</h3><blockquote><p>生成相对定位的元素，相对于 <strong>其正常位置</strong> 进行定位。</p></blockquote><p>因此，”left:20” 会向元素的 LEFT 位置添加 20 像素。</p><h3 id="inherit"><a href="#inherit" class="headerlink" title="inherit"></a>inherit</h3><blockquote><p>规定应该从父元素继承 position 属性的值。</p></blockquote><h2 id="瞎掰"><a href="#瞎掰" class="headerlink" title="瞎掰"></a>瞎掰</h2><p>由此向下，内容为瞎掰，酌情～</p><p>由此向下，内容为瞎掰，酌情～</p><p>由此向下，内容为瞎掰，酌情～</p><p>说三遍～</p><hr><h3 id="关于-absolute"><a href="#关于-absolute" class="headerlink" title="关于 absolute"></a>关于 absolute</h3><p>HTML 布局大致可以认为是各个元素按照出现顺序，依次排列。</p><p>将某个元素 position 设置为 absolute 后，相当于将该元素从这个序列中拿出，后续元素填充其之前的位置。</p><p>假如栗子中，让 nav 在前 banner 在后（其实最开始栗子我就是这么写的～咳咳～）。<br>此时，因为 banner 足够大，content 填充 banner 之前的位置后，会覆盖 banner（或被 banner 覆盖）。<br>那么，可能就需要通过设置 content 的 top 属性，在其上方填充一定像素的空白，恢复显示效果。</p><h3 id="关于-nav-使用-absolute-relative-fixed-…"><a href="#关于-nav-使用-absolute-relative-fixed-…" class="headerlink" title="关于 nav 使用 absolute/relative/fixed/…"></a>关于 nav 使用 absolute/relative/fixed/…</h3><p>nav 设置为 relative 时，虽然也可以通过 top 上移，堆叠到 banner 的上方。<br>但是，下一个元素 content 不会受这个位置移动的影响，会留出了一段空白（可修改样例看下效果）。</p><p>这样，想要覆盖这段空白，一种途径便是向上移动 content（默认 position 为 static 无法移动），<br>就需要添加 position 以及 top 样式的配置。如果后面还跟着 content2/3/4/… 那就“开心”了～</p><p>嗯，这样来看，在需要堆叠的元素里，选择“占地面积”最大的，在最前面 relative，<br>后续待堆叠元素设置为 absolute 是个可以考虑的使用方式。</p><p>不过，使用 absolute 时，width 设置比较麻烦，所以还是根据具体需求去设置啦～</p><p>最后，也不要忘记还有 fixed 可以使用哈～以上～</p><h3 id="关于-width"><a href="#关于-width" class="headerlink" title="关于 width"></a>关于 width</h3><p>相对于配置 <code>width: 100%</code>，使用如下方式（感觉）是个更好的选择，left 以及 right 限制宽度。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.nav &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  top: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;栗子&quot;&gt;&lt;a href=&quot;#栗子&quot; class=&quot;headerlink&quot; title=&quot;栗子&quot;&gt;&lt;/a&gt;栗子&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span 
      
    
    </summary>
    
      <category term="Front End" scheme="http://ashman.top/categories/Front-End/"/>
    
    
      <category term="Front End" scheme="http://ashman.top/tags/Front-End/"/>
    
      <category term="css" scheme="http://ashman.top/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>页面布局之居中</title>
    <link href="http://ashman.top/2018/04/26/front-end/css/%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80%E4%B9%8B%E5%B1%85%E4%B8%AD/"/>
    <id>http://ashman.top/2018/04/26/front-end/css/页面布局之居中/</id>
    <published>2018-04-26T06:46:40.000Z</published>
    <updated>2018-04-26T06:57:56.482Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Flex-布局方式"><a href="#Flex-布局方式" class="headerlink" title="Flex 布局方式"></a>Flex 布局方式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;页面布局之居中&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  .box &#123;</span><br><span class="line">    border: 2px solid black;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">  &#125;</span><br><span class="line">  .box-center &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    /* 内部元素垂直居中 align-items: center; 需要配合 display: flex; */</span><br><span class="line">    align-items: center;</span><br><span class="line">    /* 内部元素水平居中 justify-content: center; 需要配合 display: flex; */</span><br><span class="line">    justify-content: center;</span><br><span class="line">  &#125;</span><br><span class="line">  .box-center-vertical &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">  &#125;</span><br><span class="line">  .box-center-horizontal &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  完全居中</span><br><span class="line">  &lt;div class=&quot;box box-center&quot;&gt;喵&lt;/div&gt;</span><br><span class="line">  垂直居中</span><br><span class="line">  &lt;div class=&quot;box box-center-vertical&quot;&gt;喵&lt;/div&gt;</span><br><span class="line">  水平居中</span><br><span class="line">  &lt;div class=&quot;box box-center-horizontal&quot;&gt;喵&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Flex-布局方式&quot;&gt;&lt;a href=&quot;#Flex-布局方式&quot; class=&quot;headerlink&quot; title=&quot;Flex 布局方式&quot;&gt;&lt;/a&gt;Flex 布局方式&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t
      
    
    </summary>
    
      <category term="Front End" scheme="http://ashman.top/categories/Front-End/"/>
    
    
      <category term="Front End" scheme="http://ashman.top/tags/Front-End/"/>
    
      <category term="css" scheme="http://ashman.top/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>页面布局之左右分栏</title>
    <link href="http://ashman.top/2018/04/25/front-end/css/%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80%E4%B9%8B%E5%B7%A6%E5%8F%B3%E5%88%86%E6%A0%8F/"/>
    <id>http://ashman.top/2018/04/25/front-end/css/页面布局之左右分栏/</id>
    <published>2018-04-25T08:21:47.000Z</published>
    <updated>2018-04-26T06:47:33.566Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Flex-布局方式"><a href="#Flex-布局方式" class="headerlink" title="Flex 布局方式"></a>Flex 布局方式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;页面布局之左右分栏&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  .container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">  &#125;</span><br><span class="line">  .left &#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    border: 2px solid yellow;</span><br><span class="line">    background: orange;</span><br><span class="line">  &#125;</span><br><span class="line">  .right &#123;</span><br><span class="line">    flex: 1;</span><br><span class="line">    border: 2px solid black;</span><br><span class="line">    background: grey;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;container&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">    LEFT</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;1&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;2&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;3&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;4&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;right&quot;&gt;RIGHT&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li><a href="https://www.cnblogs.com/yzhihao/p/6513022.html" target="_blank" rel="noopener">https://www.cnblogs.com/yzhihao/p/6513022.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Flex-布局方式&quot;&gt;&lt;a href=&quot;#Flex-布局方式&quot; class=&quot;headerlink&quot; title=&quot;Flex 布局方式&quot;&gt;&lt;/a&gt;Flex 布局方式&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t
      
    
    </summary>
    
      <category term="Front End" scheme="http://ashman.top/categories/Front-End/"/>
    
    
      <category term="Front End" scheme="http://ashman.top/tags/Front-End/"/>
    
      <category term="css" scheme="http://ashman.top/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>JSON Format</title>
    <link href="http://ashman.top/2018/04/23/more/json-format/"/>
    <id>http://ashman.top/2018/04/23/more/json-format/</id>
    <published>2018-04-23T05:16:14.000Z</published>
    <updated>2018-04-23T07:23:46.540Z</updated>
    
    <content type="html"><![CDATA[<h2 id="JsonInclude-JsonInclude-Include-NON-NULL"><a href="#JsonInclude-JsonInclude-Include-NON-NULL" class="headerlink" title="@JsonInclude(JsonInclude.Include.NON_NULL)"></a><code>@JsonInclude(JsonInclude.Include.NON_NULL)</code></h2><blockquote><p>Value that indicates that only properties with non-null values are to be included.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> singoasher</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/4/23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@JsonInclude</span>(JsonInclude.Include.NON_NULL)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Payload</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String accessToken;</span><br><span class="line">    <span class="keyword">private</span> String deviceId;</span><br><span class="line">    <span class="keyword">private</span> String deviceType;</span><br><span class="line">    <span class="keyword">private</span> String attribute;</span><br><span class="line">    <span class="keyword">private</span> String value;</span><br><span class="line">    <span class="keyword">private</span> ErrorCode errorCode;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> Extensions extensions;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置前</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"accessToken"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"deviceId"</span>: <span class="string">"34234"</span>,</span><br><span class="line">    <span class="attr">"deviceType"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"attribute"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"value"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"errorCode"</span>: <span class="string">"DEVICE_IS_NOT_EXIST"</span>,</span><br><span class="line">    <span class="attr">"message"</span>: <span class="string">"device is not exist"</span>,</span><br><span class="line">    <span class="attr">"extensions"</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置后</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"deviceId"</span>: <span class="string">"34234"</span>,</span><br><span class="line">    <span class="attr">"errorCode"</span>: <span class="string">"DEVICE_IS_NOT_EXIST"</span>,</span><br><span class="line">    <span class="attr">"message"</span>: <span class="string">"device is not exist"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>备注</strong><ul><li><code>NON_NULL</code> 配置不会级联到子元素，如果未做配置，子元素中的 null 依旧会出现在 JSON 中</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;JsonInclude-JsonInclude-Include-NON-NULL&quot;&gt;&lt;a href=&quot;#JsonInclude-JsonInclude-Include-NON-NULL&quot; class=&quot;headerlink&quot; title=&quot;@JsonInclude
      
    
    </summary>
    
      <category term="JSON" scheme="http://ashman.top/categories/JSON/"/>
    
    
      <category term="JSON" scheme="http://ashman.top/tags/JSON/"/>
    
  </entry>
  
  <entry>
    <title>rpm</title>
    <link href="http://ashman.top/2018/04/19/linux/rpm/"/>
    <id>http://ashman.top/2018/04/19/linux/rpm/</id>
    <published>2018-04-19T08:48:26.000Z</published>
    <updated>2018-04-19T08:55:19.103Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><blockquote><p><code>rpm -ivh &lt;xxx.rpm&gt;</code></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sudo rpm -ivh jdk-8u162-linux-x64.rpm</span><br><span class="line">准备中...                          ################################# [100%]</span><br><span class="line">正在升级/安装...</span><br><span class="line">   1:jdk1.8-2000:1.8.0_162-fcs        ################################# [100%]</span><br><span class="line">Unpacking JAR files...</span><br><span class="line">tools.jar...</span><br><span class="line">plugin.jar...</span><br><span class="line">javaws.jar...</span><br><span class="line">deploy.jar...</span><br><span class="line">rt.jar...</span><br><span class="line">jsse.jar...</span><br><span class="line">charsets.jar...</span><br><span class="line">localedata.jar...</span><br><span class="line">$ java -version</span><br><span class="line">java version &quot;1.8.0_162&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_162-b12)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.162-b12, mixed mode)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;rpm -ivh &amp;lt;xxx.rpm&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;
      
    
    </summary>
    
      <category term="Linux" scheme="http://ashman.top/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://ashman.top/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Add User into sudoers</title>
    <link href="http://ashman.top/2018/04/19/linux/sudoers/"/>
    <id>http://ashman.top/2018/04/19/linux/sudoers/</id>
    <published>2018-04-19T06:51:44.000Z</published>
    <updated>2018-04-19T08:34:41.987Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>通过 <code>sudo</code> 以 root 用户身份执行命令</p></blockquote><p>切换到 root 用户，执行 visudo 打开配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ su root</span><br><span class="line"># visudo</span><br></pre></td></tr></table></figure><p>找到配置文件中的 <code>root    ALL=(ALL)       ALL</code> 在其后新增一行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username    ALL=(ALL)       ALL</span><br></pre></td></tr></table></figure><p>保存后，对应用户便可以使用 sudo 以 root 用户的身份执行命令</p><p>此时，执行命令需要输入当前用户的密码，若要免密，修改配置如下即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username  ALL=(ALL)       NOPASSWD:ALL</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;通过 &lt;code&gt;sudo&lt;/code&gt; 以 root 用户身份执行命令&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;切换到 root 用户，执行 visudo 打开配置文件&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="Linux" scheme="http://ashman.top/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://ashman.top/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Redis Cluster - Mac</title>
    <link href="http://ashman.top/2018/01/11/more/redis-cluster-mac/"/>
    <id>http://ashman.top/2018/01/11/more/redis-cluster-mac/</id>
    <published>2018-01-11T08:24:06.000Z</published>
    <updated>2018-01-12T02:50:29.581Z</updated>
    
    <content type="html"><![CDATA[<p>在 Mac 上搭建 Redis Cluster</p><a id="more"></a><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install redis</span><br></pre></td></tr></table></figure><p>通过 Homebrew 安装，一般会安装到 <code>/usr/local/Cellar</code> 目录下，配置文件位于 <code>/usr/local/etc</code> 目录下，直接使用可通过如下命令，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ brew services start redis</span><br><span class="line">$ redis-cli</span><br><span class="line">$ brew services stop redis</span><br></pre></td></tr></table></figure><p>其中 <code>redis-cli</code> 会默认连接到 <code>6379</code> 端口上启动的服务，连接到指定端口，使用 <code>redis-cli -p 6379</code></p><h2 id="集群配置"><a href="#集群配置" class="headerlink" title="集群配置"></a>集群配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cd /usr/local/etc</span><br><span class="line">$ mkdir redis-cluster</span><br><span class="line">$ cd redis-cluster</span><br><span class="line">$ mkdir 6380 6381 6382</span><br><span class="line">$ cp ../redis.conf 6380/redis-6380.conf</span><br></pre></td></tr></table></figure><p>修改 <code>redis-6380.conf</code> 中的如下配置项</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">daemonize yes</span><br><span class="line">cluster-enabled yes</span><br><span class="line">cluster-config-file nodes-6380.conf</span><br><span class="line">cluster-node-timeout 15000</span><br><span class="line">appendonly yes</span><br></pre></td></tr></table></figure><p>之前创建的另外两个目录下，也进行类似的操作，不做赘述。</p><p>之后，通过 <code>redis-server</code> 命令，按照不同配置文件启动。</p><ul><li>PS &gt;&gt;&gt; 通过 Homebrew 安装，以上 <code>redis-server</code> 命令，应该已经添加到环境变量，可以直接使用<ul><li>若无法使用，可首先尝试重启终端</li><li>该命令实际地址为 <code>/usr/local/Cellar/redis/4.0.6/bin/redis-server</code></li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ cd /usr/local/etc/redis-cluster</span><br><span class="line">$ cd 6380</span><br><span class="line">$ redis-server redis-6380.conf</span><br><span class="line">$ cd ../6381</span><br><span class="line">$ redis-server redis-6381.conf</span><br><span class="line">$ cd ../6382</span><br><span class="line">$ redis-server redis-6382.conf</span><br></pre></td></tr></table></figure><p>配置文件中的 <code>cluster-config-file</code> 会自动生成在 <code>/usr/local/var/db/redis</code> 目录下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nodes-6380.conf</span><br><span class="line">nodes-6381.conf</span><br><span class="line">nodes-6382.conf</span><br></pre></td></tr></table></figure><p>当前集群并非一个可用状态，下面登录其中一个节点，进行下一步配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli -p 6380</span><br><span class="line">127.0.0.1:6380&gt; CLUSTER MEET 127.0.0.1 6381</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6380&gt; CLUSTER MEET 127.0.0.1 6382</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6380&gt; CLUSTER NODES</span><br><span class="line">0592bba6effccae5a2634f1f1ed972adcdcbc4b8 127.0.0.1:6380@16380 myself,master - 0 1515663627000 1 connected</span><br><span class="line">f0bf627ebf9668ebccf8e0dc8536b6151432a5f0 127.0.0.1:6382@16382 master - 0 1515663628816 0 connected</span><br><span class="line">9000e666aee2a910b96ac060553700ee29405397 127.0.0.1:6381@16381 master - 0 1515663629825 2 connected</span><br></pre></td></tr></table></figure><p>此时，通过 <code>CLUSTER INFO</code> 命令查看，集群状态 <code>cluster_state</code> 依旧是 <code>fail</code>。<br>原因是 16384 个 hash slot 还没有被分配给集群中节点，接下来需要分配 slot。</p><p>有两种方式分配 slot：</p><ol><li>（未测试）通过 <code>CLUSTER ADDSLOTS</code> 命令来分配 slot，这种方式是一个个 slot 添加到指定节点，比较麻烦。</li><li>直接在配置文件 <code>nodes-6380.conf/nodes-6381.conf/nodes-6382.conf</code> 中指定<ul><li>在每个文件中包含 <code>myself</code> 的行的末尾添加 slot 信息，例如在 <code>nodes-6380.conf</code> 文件中，改动如下</li></ul></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0592bba6effccae5a2634f1f1ed972adcdcbc4b8 127.0.0.1:6380@16380 myself,master - 0 1515663627000 1 connected 0-5000</span><br></pre></td></tr></table></figure><p>对应的 <code>6381</code> 可分配 slot <code>5001-10000</code>，<code>6382</code> 可分配 <code>10001-16382</code>，之后重启服务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6380&gt; CLUSTER NODES</span><br><span class="line">0592bba6effccae5a2634f1f1ed972adcdcbc4b8 127.0.0.1:6380@16380 myself,master - 0 1515663627000 1 connected 0-5000</span><br><span class="line">f0bf627ebf9668ebccf8e0dc8536b6151432a5f0 127.0.0.1:6382@16382 master - 0 1515663628816 0 connected 10001-16383</span><br><span class="line">9000e666aee2a910b96ac060553700ee29405397 127.0.0.1:6381@16381 master - 0 1515663629825 2 connected 5001-10000</span><br><span class="line">127.0.0.1:6380&gt; CLUSTER INFO</span><br><span class="line">cluster_state:ok</span><br><span class="line">cluster_slots_assigned:16384</span><br><span class="line">cluster_slots_ok:16384</span><br><span class="line">cluster_slots_pfail:0</span><br><span class="line">cluster_slots_fail:0</span><br><span class="line">cluster_known_nodes:3</span><br><span class="line">cluster_size:3</span><br><span class="line">cluster_current_epoch:2</span><br><span class="line">cluster_my_epoch:1</span><br><span class="line">cluster_stats_messages_ping_sent:388</span><br><span class="line">cluster_stats_messages_pong_sent:105</span><br><span class="line">cluster_stats_messages_sent:493</span><br><span class="line">cluster_stats_messages_ping_received:105</span><br><span class="line">cluster_stats_messages_pong_received:106</span><br><span class="line">cluster_stats_messages_received:211</span><br></pre></td></tr></table></figure><p>但是，测试使用可能会出现以下错误</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6380&gt; get test</span><br><span class="line">(error) MOVED 6918 127.0.0.1:6381</span><br></pre></td></tr></table></figure><p>根据错误提示，需要在 <code>6381</code> 端口的 Redis 节点上进行对应的操作，而通过 <code>-c</code> 参数登录，便可以避免这个错误</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli -p 6380 -c</span><br><span class="line">127.0.0.1:6380&gt; set test &quot;Test Message&quot;</span><br><span class="line">-&gt; Redirected to slot [6918] located at 127.0.0.1:6381</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6381&gt; get test</span><br><span class="line">&quot;Test Message&quot;</span><br></pre></td></tr></table></figure><h2 id="密码认证"><a href="#密码认证" class="headerlink" title="密码认证"></a>密码认证</h2><p><strong>说在前面</strong> &gt;&gt;&gt; 关于密码认证的配置，<strong>并非</strong> 最终结论，应该有更好的方式配置，但因无特别需求，未深入了解</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6381&gt; CONFIG SET masterauth 123456</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6381&gt; CONFIG SET requirepass 123456</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6381&gt; CONFIG REWRITE</span><br><span class="line">(error) NOAUTH Authentication required.</span><br></pre></td></tr></table></figure><p>此时，密码认证已经生效，但是并未写入配置文件，重启将会失效。<br>但是因为已经开启了认证 <code>CONFIG REWRITE</code> 无法执行，所以需要通过 <code>-a</code> 可选项输入密码，重新登录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli -p 6381 -c -a 123456</span><br><span class="line">127.0.0.1:6381&gt; CONFIG REWRITE</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><p>之后可以发现 <code>6381</code> 对应的配置文件已经被重写（<code>6380</code> 与 <code>6382</code> 不会）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cd /usr/local/etc/redis-cluster/6381</span><br><span class="line">$ grep -r &apos;masterauth&apos; redis-6381.conf</span><br><span class="line">redis-6381.conf:# masterauth &lt;master-password&gt;</span><br><span class="line">redis-6381.conf:masterauth &quot;123456&quot;</span><br><span class="line">$ grep -r &apos;requirepass&apos; redis-6381.conf </span><br><span class="line">redis-6381.conf:# If the master is password protected (using the &quot;requirepass&quot; configuration</span><br><span class="line">redis-6381.conf:# requirepass foobared</span><br><span class="line">redis-6381.conf:requirepass &quot;123456&quot;</span><br></pre></td></tr></table></figure><p>重启服务，会发现验证也仅在 <code>6381</code> 节点上有效，因此</p><ul><li>如果想要对部分 slot 设置密码，在对应节点上进行配置（或者直接修改配置文件）</li><li>全部设置密码，则需要在每个节点上进行操作（直接修改配置文件会更方便些）</li></ul><h2 id="疑问"><a href="#疑问" class="headerlink" title="疑问"></a>疑问</h2><p>启动 6380 端口的服务 16380 端口也会被这个进程占用，其他两个节点同理。通过 <code>CLUSTER NODES</code> 命令可以发现，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6380@16380</span><br><span class="line">127.0.0.1:6381@16381</span><br><span class="line">127.0.0.1:6382@16382</span><br></pre></td></tr></table></figure><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li><a href="http://blog.51cto.com/libankling/1832255" target="_blank" rel="noopener">Redis 集群的安装和配置 - Mac</a></li><li><a href="http://blog.csdn.net/a67474506/article/details/50435845" target="_blank" rel="noopener">Redis 学习笔记(五) 基于 Redis 3.0 的集群</a></li><li><a href="http://blog.csdn.net/daiyudong2020/article/details/51674169" target="_blank" rel="noopener">Redis 集群设置密码</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在 Mac 上搭建 Redis Cluster&lt;/p&gt;
    
    </summary>
    
      <category term="更多" scheme="http://ashman.top/categories/%E6%9B%B4%E5%A4%9A/"/>
    
    
      <category term="Mac" scheme="http://ashman.top/tags/Mac/"/>
    
      <category term="Redis" scheme="http://ashman.top/tags/Redis/"/>
    
      <category term="Cluster" scheme="http://ashman.top/tags/Cluster/"/>
    
  </entry>
  
  <entry>
    <title>MySQL 命令</title>
    <link href="http://ashman.top/2018/01/10/more/mysql-command/"/>
    <id>http://ashman.top/2018/01/10/more/mysql-command/</id>
    <published>2018-01-10T02:33:01.000Z</published>
    <updated>2018-01-10T04:28:13.197Z</updated>
    
    <content type="html"><![CDATA[<p>这里会简单介绍 MySQL 操作命令（持续更新……）</p><a id="more"></a><h2 id="库操作"><a href="#库操作" class="headerlink" title="库操作"></a>库操作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br><span class="line">create database db_name;</span><br><span class="line">use db_name;</span><br><span class="line">drop database db_name;</span><br></pre></td></tr></table></figure><h2 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h2><h3 id="列出表"><a href="#列出表" class="headerlink" title="列出表"></a>列出表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure><h3 id="新建表"><a href="#新建表" class="headerlink" title="新建表"></a>新建表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `tb_name` (</span><br><span class="line">  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT &apos;Primary Key&apos;,</span><br><span class="line">  `name` varchar(30) NOT NULL COMMENT &apos;Name&apos;,</span><br><span class="line">  `description` varchar(30) DEFAULT NULL COMMENT &apos;Description&apos;,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure><h3 id="表结构"><a href="#表结构" class="headerlink" title="表结构"></a>表结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">describe tb_name;</span><br></pre></td></tr></table></figure><h2 id="用户操作"><a href="#用户操作" class="headerlink" title="用户操作"></a>用户操作</h2><h3 id="新建用户"><a href="#新建用户" class="headerlink" title="新建用户"></a>新建用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &apos;username&apos;@&apos;host&apos; IDENTIFIED BY &apos;password&apos;;</span><br></pre></td></tr></table></figure><p>e.g.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE USER &apos;test&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos;;</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select Host, User from mysql.user;</span><br><span class="line">+-----------+---------------+</span><br><span class="line">| Host      | User          |</span><br><span class="line">+-----------+---------------+</span><br><span class="line">| %         | test          |</span><br><span class="line">| localhost | mysql.session |</span><br><span class="line">| localhost | mysql.sys     |</span><br><span class="line">| localhost | root          |</span><br><span class="line">+-----------+---------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="用户授权"><a href="#用户授权" class="headerlink" title="用户授权"></a>用户授权</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GRANT INSERT, DELETE, UPDATE, SELECT ON db_name.tb_name TO &apos;username&apos;@&apos;host&apos;;</span><br><span class="line">GRANT INSERT, DELETE, UPDATE, SELECT ON db_name.* TO &apos;username&apos;@&apos;host&apos;;</span><br><span class="line">GRANT ALL ON db_name.* TO &apos;username&apos;@&apos;host&apos;;</span><br></pre></td></tr></table></figure><h3 id="取消授权"><a href="#取消授权" class="headerlink" title="取消授权"></a>取消授权</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">REVOKE ALL ON db_name.* FROM &apos;username&apos;@&apos;host&apos;;</span><br><span class="line">REVOKE INSERT, DELETE, UPDATE, SELECT ON db_name.tb_name FROM &apos;username&apos;@&apos;host&apos;;</span><br></pre></td></tr></table></figure><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li><a href="http://blog.csdn.net/liuxiao723846/article/details/49583827" target="_blank" rel="noopener">MySQL 用户表中多个 Host 时的匹配规则</a></li><li><a href="https://www.jianshu.com/p/d7b9c468f20d" target="_blank" rel="noopener">MySQL 创建用户与授权</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里会简单介绍 MySQL 操作命令（持续更新……）&lt;/p&gt;
    
    </summary>
    
      <category term="更多" scheme="http://ashman.top/categories/%E6%9B%B4%E5%A4%9A/"/>
    
    
      <category term="MySQL" scheme="http://ashman.top/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MongoDB 安装及使用 - Mac</title>
    <link href="http://ashman.top/2018/01/09/mongodb/install-mongodb-mac/"/>
    <id>http://ashman.top/2018/01/09/mongodb/install-mongodb-mac/</id>
    <published>2018-01-09T07:56:10.000Z</published>
    <updated>2018-01-11T08:26:43.574Z</updated>
    
    <content type="html"><![CDATA[<p>在 Mac 上安装及使用 MongoDB</p><a id="more"></a><h2 id="安装-启动-停止-卸载"><a href="#安装-启动-停止-卸载" class="headerlink" title="安装/启动/停止/卸载"></a>安装/启动/停止/卸载</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ brew install mongodb</span><br><span class="line">$ brew services start mongodb</span><br><span class="line">$ brew services stop mongodb</span><br><span class="line">$ brew uninstal mongodb</span><br></pre></td></tr></table></figure><h2 id="默认配置"><a href="#默认配置" class="headerlink" title="默认配置"></a>默认配置</h2><ul><li>文件路径 <code>/usr/local/etc/mongod.conf</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  path: /usr/local/var/log/mongodb/mongo.log</span><br><span class="line">  logAppend: true</span><br><span class="line">storage:</span><br><span class="line">  dbPath: /usr/local/var/mongodb</span><br><span class="line">net:</span><br><span class="line">  bindIp: 127.0.0.1</span><br></pre></td></tr></table></figure><h2 id="To-be-continue-…"><a href="#To-be-continue-…" class="headerlink" title="To be continue …"></a>To be continue …</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在 Mac 上安装及使用 MongoDB&lt;/p&gt;
    
    </summary>
    
      <category term="MongoDB" scheme="http://ashman.top/categories/MongoDB/"/>
    
    
      <category term="MongoDB" scheme="http://ashman.top/tags/MongoDB/"/>
    
      <category term="Mac" scheme="http://ashman.top/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>Vim 命令</title>
    <link href="http://ashman.top/2018/01/09/more/vim-command/"/>
    <id>http://ashman.top/2018/01/09/more/vim-command/</id>
    <published>2018-01-09T06:03:27.000Z</published>
    <updated>2018-02-01T02:42:28.130Z</updated>
    
    <content type="html"><![CDATA[<p>这里会简单介绍 Vim 操作命令（持续更新……）</p><a id="more"></a><h2 id="整行移动"><a href="#整行移动" class="headerlink" title="整行移动"></a>整行移动</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0   移动到行首</span><br><span class="line">$   移动到行末</span><br><span class="line">+   移动到下一行开头</span><br><span class="line">-   移动到上一行开头</span><br></pre></td></tr></table></figure><h2 id="多窗口"><a href="#多窗口" class="headerlink" title="多窗口"></a>多窗口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">control + w + v                新建一个纵向窗口，打开当前文件</span><br><span class="line">:vs                            等价于 [control + w + v]</span><br><span class="line">:vs path                       新建一个纵向窗口，打开指定 path</span><br><span class="line">control + w &gt;&gt;&gt; w              多窗口间切换，即先使用组合键 [control + w] 之后再次点击 [w]</span><br><span class="line">control + w &gt;&gt;&gt; control + w    等价于 [control + w &gt;&gt;&gt; w]</span><br></pre></td></tr></table></figure><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li><a href="https://www.cnblogs.com/nerxious/archive/2012/12/21/2827303.html" target="_blank" rel="noopener">轻快的VIM（一）：移动</a></li><li><a href="http://vimcdoc.sourceforge.net/doc/usr_08.html#usr_08.txt" target="_blank" rel="noopener">VIM 用户手册 usr_08.txt</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里会简单介绍 Vim 操作命令（持续更新……）&lt;/p&gt;
    
    </summary>
    
      <category term="更多" scheme="http://ashman.top/categories/%E6%9B%B4%E5%A4%9A/"/>
    
    
      <category term="Vim" scheme="http://ashman.top/tags/Vim/"/>
    
  </entry>
  
  <entry>
    <title>NPM 使用介绍</title>
    <link href="http://ashman.top/2017/12/15/front-end/nodejs/nodejs-npm-intro/"/>
    <id>http://ashman.top/2017/12/15/front-end/nodejs/nodejs-npm-intro/</id>
    <published>2017-12-15T07:56:37.000Z</published>
    <updated>2017-12-21T01:44:49.813Z</updated>
    
    <content type="html"><![CDATA[<p>NPM - Node Package Manager - Node.js 包管理和分发工具</p><a id="more"></a><h2 id="cnpm"><a href="#cnpm" class="headerlink" title="cnpm"></a>cnpm</h2><ul><li><a href="https://github.com/cnpm/cnpm" target="_blank" rel="noopener">cnpm/cnpm</a><ul><li>cnpm: npm client for China mirror of npm <a href="https://npm.taobao.org" target="_blank" rel="noopener">https://npm.taobao.org</a></li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo npm install cnpm -g</span><br></pre></td></tr></table></figure><h2 id="install-module"><a href="#install-module" class="headerlink" title="install module"></a>install module</h2><h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p>文件 <code>package.json</code> 位于模块的目录下，用于定义包的属性。</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li><a href="http://www.runoob.com/nodejs/nodejs-npm.html" target="_blank" rel="noopener">NPM 使用介绍</a></li><li><a href="https://docs.npmjs.com/files/package.json" target="_blank" rel="noopener">package.json - Specifics of npm’s package.json handling</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;NPM - Node Package Manager - Node.js 包管理和分发工具&lt;/p&gt;
    
    </summary>
    
      <category term="Front End" scheme="http://ashman.top/categories/Front-End/"/>
    
    
      <category term="Front End" scheme="http://ashman.top/tags/Front-End/"/>
    
      <category term="Node.js" scheme="http://ashman.top/tags/Node-js/"/>
    
  </entry>
  
  <entry>
    <title>gulp 使用介绍</title>
    <link href="http://ashman.top/2017/12/14/front-end/gulp/gulp-intro/"/>
    <id>http://ashman.top/2017/12/14/front-end/gulp/gulp-intro/</id>
    <published>2017-12-14T02:20:55.000Z</published>
    <updated>2018-03-07T08:40:56.555Z</updated>
    
    <content type="html"><![CDATA[<p>先把坑挖好……</p><a id="more"></a><h2 id="初识"><a href="#初识" class="headerlink" title="初识"></a>初识</h2><p>全局安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo npm install gulp -g</span><br></pre></td></tr></table></figure><p>定位到 <strong>项目根目录</strong>，作为项目的开发依赖（devDependencies）安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install gulp --save-dev</span><br></pre></td></tr></table></figure><p>在项目根目录下创建一个名为 <code>gulpfile.js</code> 的文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ touch gulpfile.js</span><br></pre></td></tr></table></figure><p>编辑文件，添加 gulp 任务，其中 <code>default</code> 为默认任务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var gulp = require(&apos;gulp&apos;);</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;default&apos;, function() &#123;</span><br><span class="line">    console.log(&apos;default run&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;hello&apos;, function() &#123;</span><br><span class="line">    console.log(&apos;Hello World&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>直接运行 gulp 会执行默认任务（等价于执行 <code>gulp default</code>）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ gulp</span><br><span class="line">[17:21:09] Using gulpfile ~/test/gulp/gulpfile.js</span><br><span class="line">[17:21:09] Starting &apos;default&apos;...</span><br><span class="line">default run</span><br><span class="line">[17:21:09] Finished &apos;default&apos; after 130 μs</span><br></pre></td></tr></table></figure><p>执行指定任务（如 <code>hello</code>），则可使用如下命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ gulp hello</span><br><span class="line">[17:20:42] Using gulpfile ~/test/gulp/gulpfile.js</span><br><span class="line">[17:20:42] Starting &apos;hello&apos;...</span><br><span class="line">Hello World</span><br><span class="line">[17:20:42] Finished &apos;hello&apos; after 126 μs</span><br></pre></td></tr></table></figure><h2 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h2><ul><li><a href="http://babeljs.io/" target="_blank" rel="noopener">Babel</a></li></ul><blockquote><p>Babel is a JavaScript compiler. Use next generation JavaScript, today.</p></blockquote><p>Install the Babel CLI and a preset</p><ul><li>安装 <code>babel-cli</code> 和 <code>babel-preset-env</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev babel-cli babel-preset-env</span><br></pre></td></tr></table></figure><p>Create a .babelrc file (or use your package.json)</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [<span class="string">"env"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Current package.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"babel-cli"</span>: <span class="string">"^6.26.0"</span>,</span><br><span class="line">    <span class="attr">"babel-preset-env"</span>: <span class="string">"^1.6.1"</span>,</span><br><span class="line">    <span class="attr">"gulp"</span>: <span class="string">"^3.9.1"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Current gulpfile</p><ul><li>必须命名为 <code>gulpfile.babel.js</code> 否则无法正确识别</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import gulp from &apos;gulp&apos;;</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;default&apos;, () =&gt; &#123;</span><br><span class="line">    console.log(&quot;Default&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ gulp</span><br><span class="line">[17:14:34] Failed to load external module @babel/register</span><br><span class="line">[17:14:34] Requiring external module babel-register</span><br><span class="line">[17:14:35] Using gulpfile ~/test/gulp/gulpfile.babel.js</span><br><span class="line">[17:14:35] Starting &apos;default&apos;...</span><br><span class="line">Default</span><br><span class="line">[17:14:35] Finished &apos;default&apos; after 120 μs</span><br></pre></td></tr></table></figure><h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const gulp = require(&apos;gulp&apos;);</span><br><span class="line">// scss to css</span><br><span class="line">const gulpSass = require(&apos;gulp-sass&apos;);</span><br><span class="line">// concat files</span><br><span class="line">const gulpConcat = require(&apos;gulp-concat&apos;);</span><br><span class="line">// minify css</span><br><span class="line">const gulpMinifyCss = require(&apos;gulp-minify-css&apos;);</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;style&apos;, function () &#123;</span><br><span class="line">   return gulp.src(&apos;./app/style/**/*.scss&apos;)</span><br><span class="line">       .pipe(gulpSass())</span><br><span class="line">       .pipe(gulpConcat(&apos;core.min.css&apos;))</span><br><span class="line">       .pipe(gulpMinifyCss())</span><br><span class="line">       .pipe(gulp.dest(&apos;./dest/style&apos;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;default&apos;, function () &#123;</span><br><span class="line">   console.log(&apos;Default Task Run ...&apos;);</span><br><span class="line">   gulp.run(&apos;style&apos;);</span><br><span class="line">   // Watch directory setting, after changed, then run task &apos;style&apos;</span><br><span class="line">   gulp.watch(&apos;./app/style/**/*.scss&apos;, [&apos;style&apos;]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>gulp-load-plugins</code> and <code>gulp.run() has been deprecated.</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const gulp = require(&apos;gulp&apos;);</span><br><span class="line">const gulpLoadPlugins = require(&apos;gulp-load-plugins&apos;);</span><br><span class="line"></span><br><span class="line">const plugins = gulpLoadPlugins();</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;style&apos;, function () &#123;</span><br><span class="line">   return gulp.src(&apos;./app/style/**/*.scss&apos;)</span><br><span class="line">       .pipe(plugins.sass())</span><br><span class="line">       .pipe(plugins.concat(&apos;core.min.css&apos;))</span><br><span class="line">       .pipe(plugins.minifyCss())</span><br><span class="line">       .pipe(gulp.dest(&apos;./dest/style&apos;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;default&apos;, [&apos;style&apos;], function () &#123;</span><br><span class="line">   gulp.watch(&apos;./app/style/**/*.scss&apos;, [&apos;style&apos;]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>browser-sync</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">const gulp = require(&apos;gulp&apos;);</span><br><span class="line">const gulpLoadPlugins = require(&apos;gulp-load-plugins&apos;);</span><br><span class="line">const browserSync = require(&apos;browser-sync&apos;).create();</span><br><span class="line"></span><br><span class="line">const plugins = gulpLoadPlugins();</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;style&apos;, function () &#123;</span><br><span class="line">   return gulp.src(&apos;./app/style/**/*.scss&apos;)</span><br><span class="line">       .pipe(plugins.sass())</span><br><span class="line">       .pipe(plugins.concat(&apos;core.min.css&apos;))</span><br><span class="line">       .pipe(plugins.minifyCss())</span><br><span class="line">       .pipe(gulp.dest(&apos;./dest/style&apos;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;html&apos;, function () &#123;</span><br><span class="line">    return gulp.src(&apos;./app/html/**/*.html&apos;)</span><br><span class="line">        .pipe(gulp.dest(&apos;./dest/html&apos;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 静态服务器</span><br><span class="line">gulp.task(&apos;browser-sync&apos;, function() &#123;</span><br><span class="line">    // browser-sync watch 改变后自动刷新页面</span><br><span class="line">    const files = [&apos;./dest/style/**/*.scss&apos;, &apos;./dest/html/**/*.html&apos;];</span><br><span class="line">    browserSync.init(files, &#123;</span><br><span class="line">        server: &#123;</span><br><span class="line">            // 默认打开该目录下的 index.html 访问具体文件 http://localhost:3000/index.html</span><br><span class="line">            baseDir: &quot;./dest/html&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;default&apos;, [&apos;style&apos;, &apos;html&apos;, &apos;browser-sync&apos;], function () &#123;</span><br><span class="line">    // gulp watch 改变后执行对应任务，构建项目</span><br><span class="line">    gulp.watch(&apos;./app/style/**/*.scss&apos;, [&apos;style&apos;]);</span><br><span class="line">    gulp.watch(&apos;./app/html/**/*.html&apos;, [&apos;html&apos;]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;先把坑挖好……&lt;/p&gt;
    
    </summary>
    
      <category term="Front End" scheme="http://ashman.top/categories/Front-End/"/>
    
    
      <category term="Front End" scheme="http://ashman.top/tags/Front-End/"/>
    
      <category term="gulp" scheme="http://ashman.top/tags/gulp/"/>
    
  </entry>
  
  <entry>
    <title>Git 命令</title>
    <link href="http://ashman.top/2017/12/11/more/git-command/"/>
    <id>http://ashman.top/2017/12/11/more/git-command/</id>
    <published>2017-12-11T02:31:12.000Z</published>
    <updated>2018-04-19T09:54:07.225Z</updated>
    
    <content type="html"><![CDATA[<p>这里会简单介绍 Git 操作命令（持续更新……）</p><a id="more"></a><h2 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -h</span><br></pre></td></tr></table></figure><h3 id="新建标签"><a href="#新建标签" class="headerlink" title="新建标签"></a>新建标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v0.0.1 -m &quot;version 0.0.1&quot;</span><br><span class="line">$ git tag v0.0.2-light</span><br></pre></td></tr></table></figure><h3 id="标签列表"><a href="#标签列表" class="headerlink" title="标签列表"></a>标签列表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git tag</span><br><span class="line">v0.0.1</span><br><span class="line">v0.0.2-light</span><br><span class="line"></span><br><span class="line">$ git tag -l</span><br><span class="line">v0.0.1</span><br><span class="line">v0.0.2-light</span><br><span class="line"></span><br><span class="line">$ git tag -n1</span><br><span class="line">v0.0.1          version 0.0.1</span><br><span class="line">v0.0.2-light    update xxx</span><br></pre></td></tr></table></figure><h3 id="查看标签详情"><a href="#查看标签详情" class="headerlink" title="查看标签详情"></a>查看标签详情</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git show v0.0.2-light</span><br></pre></td></tr></table></figure><h3 id="切换到指定标签"><a href="#切换到指定标签" class="headerlink" title="切换到指定标签"></a>切换到指定标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout v0.0.1</span><br></pre></td></tr></table></figure><h3 id="删除标签"><a href="#删除标签" class="headerlink" title="删除标签"></a>删除标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d v0.0.1</span><br><span class="line">Deleted tag &apos;v0.0.1&apos; (was bce8bc1)</span><br></pre></td></tr></table></figure><h3 id="为指定-commit-添加标签"><a href="#为指定-commit-添加标签" class="headerlink" title="为指定 commit 添加标签"></a>为指定 commit 添加标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v0.0.1-x 77aba8</span><br><span class="line">$ git tag -n1</span><br><span class="line">v0.0.1-x        version 0.0.1-x</span><br><span class="line">v0.0.2-light    update xxx</span><br></pre></td></tr></table></figure><h3 id="提交标签到远程"><a href="#提交标签到远程" class="headerlink" title="提交标签到远程"></a>提交标签到远程</h3><p>通常 <code>git push</code> 不会将标签提交，需显式操作：</p><p>提交 v0.0.1 标签</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin v0.0.1</span><br></pre></td></tr></table></figure><p>提交本地所有标签</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin --tags</span><br></pre></td></tr></table></figure><h2 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -h</span><br></pre></td></tr></table></figure><h3 id="amend-previous-commit"><a href="#amend-previous-commit" class="headerlink" title="amend previous commit"></a>amend previous commit</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit --amend -h</span><br></pre></td></tr></table></figure><h4 id="修改上一次提交的-Author-信息"><a href="#修改上一次提交的-Author-信息" class="headerlink" title="修改上一次提交的 Author 信息"></a>修改上一次提交的 Author 信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend --author=&apos;Name &lt;email&gt;&apos;</span><br></pre></td></tr></table></figure><p>符合以上命令格式即可，例如，直接输入上面的命令时</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line"></span><br><span class="line">commit f2928cb0b6bc9d29e533110ad381bd28d9413d8d (HEAD -&gt; master)</span><br><span class="line">Author: Name &lt;email&gt;</span><br><span class="line">Date:   Thu Jan 18 09:54:50 2018 +0800</span><br></pre></td></tr></table></figure><h2 id="fatal"><a href="#fatal" class="headerlink" title="fatal"></a>fatal</h2><h3 id="fatal-refusing-to-merge-unrelated-histories"><a href="#fatal-refusing-to-merge-unrelated-histories" class="headerlink" title="fatal: refusing to merge unrelated histories"></a>fatal: refusing to merge unrelated histories</h3><ul><li>创建本地仓库</li><li>创建远程仓库，并自动生成了一些文件</li><li>需要关联本地和远程仓库，此时无法直接 push</li><li>首先执行 pull 但是会出现以上报错，添加 <code>--allow-unrelated-histories</code> 解决</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master --allow-unrelated-histories</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里会简单介绍 Git 操作命令（持续更新……）&lt;/p&gt;
    
    </summary>
    
      <category term="更多" scheme="http://ashman.top/categories/%E6%9B%B4%E5%A4%9A/"/>
    
    
      <category term="Git" scheme="http://ashman.top/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot with Swagger</title>
    <link href="http://ashman.top/2017/11/21/spring/spring-boot/spring-boot-with-swagger/"/>
    <id>http://ashman.top/2017/11/21/spring/spring-boot/spring-boot-with-swagger/</id>
    <published>2017-11-21T10:40:43.000Z</published>
    <updated>2017-11-21T15:32:33.835Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>THE WORLD’S MOST POPULAR API TOOLING</p></blockquote><a id="more"></a><h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- swagger --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.6.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.6.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">createRestApi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">"top.ashman.sample.controller"</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">                .title(<span class="string">"API Title - Powered by Swagger"</span>)</span><br><span class="line">                .description(<span class="string">"Description of API"</span>)</span><br><span class="line">                .termsOfServiceUrl(<span class="string">"sample.ashman.top"</span>)</span><br><span class="line">                .version(<span class="string">"v1"</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Api</span>(value = <span class="string">"Demo API"</span>)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(path = <span class="string">"/v1/demo"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DemoService demoService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value = <span class="string">"Create Demo"</span>)</span><br><span class="line">    <span class="meta">@RequestMapping</span>(method = RequestMethod.POST)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">create</span><span class="params">(@RequestBody DemoCommand demoCommand)</span> <span class="keyword">throws</span> URISyntaxException </span>&#123;</span><br><span class="line">        Demo demo = demoService.create(demoCommand);</span><br><span class="line">        URI uri = <span class="keyword">new</span> URI(<span class="string">"/v1/demo/"</span> + demo.getId());</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.created(uri).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="一个遇到的问题"><a href="#一个遇到的问题" class="headerlink" title="一个遇到的问题"></a>一个遇到的问题</h2><p>代码实现时，针对 <code>@RequestMapping</code> 做了切面方法，用来记录请求数据和返回值。<br>在切面方法中，使用了 <code>Method java.lang.Class#getMethod(String name, Class&lt;?&gt;... parameterTypes)</code> 方法。</p><p>关于这个方法，其注释中注明了这是一个用于获取 public 方法的方法：</p><ul><li>Returns a {@code Method} object that reflects the specified <strong>public</strong> member method of the class or interface represented by this {@code Class} object. </li></ul><p>而 Swagger <code>springfox.documentation.swagger.web.ApiResourceController</code> 中，<br><code>@RequestMapping</code> 注解下的 uiConfiguration 方法并非一个 public 方法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(value = &quot;/configuration/ui&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">ResponseEntity&lt;UiConfiguration&gt; uiConfiguration() &#123;</span><br><span class="line">return new ResponseEntity&lt;UiConfiguration&gt;(</span><br><span class="line">    Optional.fromNullable(uiConfiguration).or(UiConfiguration.DEFAULT), HttpStatus.OK);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这导致了切面调用的 <code>getMethod</code> 方法无法正常执行，抛出 <code>NoSuchMethodException</code> 异常：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// getMethod 方法代码片段</span><br><span class="line">if (method == null) &#123;</span><br><span class="line">    throw new NoSuchMethodException(getName() + &quot;.&quot; + name + argumentTypesToString(parameterTypes));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也就导致无法正常使用 Swagger 的 UI 功能。</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li><a href="https://swagger.io/" target="_blank" rel="noopener">World’s Most Popular API Framework | Swagger</a></li><li><a href="http://blog.csdn.net/forezp/article/details/71023536" target="_blank" rel="noopener">Spring Boot 集成 Swagger2 - 构建优雅的 Restful API</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;THE WORLD’S MOST POPULAR API TOOLING&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Spring Boot" scheme="http://ashman.top/categories/Spring-Boot/"/>
    
    
      <category term="Spring Boot" scheme="http://ashman.top/tags/Spring-Boot/"/>
    
      <category term="Swagger" scheme="http://ashman.top/tags/Swagger/"/>
    
      <category term="RESTful API" scheme="http://ashman.top/tags/RESTful-API/"/>
    
  </entry>
  
  <entry>
    <title>Equals or Not</title>
    <link href="http://ashman.top/2017/11/14/java/equals-or-not/"/>
    <id>http://ashman.top/2017/11/14/java/equals-or-not/</id>
    <published>2017-11-14T07:24:20.000Z</published>
    <updated>2017-11-21T15:32:33.835Z</updated>
    
    <content type="html"><![CDATA[<p>简单介绍一些帮助判断 equals 的方法</p><a id="more"></a><h2 id="org-apache-commons-lang-builder-EqualsBuilder"><a href="#org-apache-commons-lang-builder-EqualsBuilder" class="headerlink" title="org.apache.commons.lang.builder.EqualsBuilder"></a>org.apache.commons.lang.builder.EqualsBuilder</h2><p>FROM - <a href="https://github.com/citerus/dddsample-core" target="_blank" rel="noopener">dddsample-core</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public boolean sameEventAs(final HandlingEvent other) &#123;</span><br><span class="line">    return other != null &amp;&amp; new EqualsBuilder().</span><br><span class="line">            append(this.cargo, other.cargo).</span><br><span class="line">            append(this.voyage, other.voyage).</span><br><span class="line">            append(this.completionTime, other.completionTime).</span><br><span class="line">            append(this.location, other.location).</span><br><span class="line">            append(this.type, other.type).</span><br><span class="line">            isEquals();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="java-util-Objects"><a href="#java-util-Objects" class="headerlink" title="java.util.Objects"></a>java.util.Objects</h2><p>FROM - 阿里巴巴 JAVA 开发手册</p><blockquote><p>推荐使用 JDK7 引入的工具类 <code>java.util.Objects#equals</code></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static boolean equals(Object a, Object b) &#123;</span><br><span class="line">    return (a == b) || (a != null &amp;&amp; a.equals(b));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;简单介绍一些帮助判断 equals 的方法&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://ashman.top/categories/Java/"/>
    
    
      <category term="Java" scheme="http://ashman.top/tags/Java/"/>
    
  </entry>
  
</feed>
